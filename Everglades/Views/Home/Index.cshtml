@model Everglades.Models.ModelManage
@{
    Everglades.Models.IAsset Hedging_Portfolio = Model.Hedging_Portfolio;
    Everglades.Models.IAsset Product = Model.everg;
}

<!-- update date -->
<div id="update" class="update">
    last update :
    <br/>
    <span id="update_date">@DateTime.Now.ToString("h:mm:ss tt")</span>
    <br/>
    <a href="/"><span id="update_button" class="glyphicon glyphicon-refresh"></span></a>
</div>

<!-- Header -->
<header id="top" class="header">
    <div class="text-vertical-center">
        <h1>Everglades</h1>
        <h3>Interface de pur bogoss</h3>
        <br/>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-2"></div>
                <div class="col-sm-2">
                    <table id="table_main" class="table table-hover">
                        <tbody>
                            <tr>
                                <td>Shares</td>
                                <td>240104</td>
                            </tr>
                            <tr>
                                <td>Hedging Portfolio Value</td>
                                <td>@Hedging_Portfolio.Get_Price()</td>
                            </tr>
                            <tr>
                                <td>Product Value</td>
                                <td>32101942</td>
                            </tr>
                            <tr>
                                <td>Margin</td>
                                <td>10182161</td>
                            </tr>
                            <tr>
                                <td>Cash</td>
                                <td>@Model.cash</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-sm-4">
                    <div id="graph" class="graph"></div>
                </div>
                <div class="col-sm-3">
                    <div id="donut"></div>
                </div>
                <div class="col-sm-2"></div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-sm-3">
                    <h2>Equities</h2>
                    <table id="table_equities" class="table table-hover">
                        <thead>
                            <tr>
                                <th>Asset</th>
                                <th>Price</th>
                                <th>Buy</th>
                                <th>Sell</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (Everglades.Models.IAsset a in Model.Assets)
                            {
                                <tr>
                                    <td class="asset-clickable" asset="@a.Get_Name()">@a.Get_Name()</td>
                                    <td>@a.Get_Price()€</td>
                                    <td>
                                        <button class="buybutton btn btn-default btn-xs" asset="@a.Get_Name()" type="button">
                                            <span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                    </td>
                                    <td>
                                        <button class="sellbutton btn btn-default btn-xs" asset="@a.Get_Name()" type="button">
                                            <span class="glyphicon glyphicon-minus"></span>
                                        </button>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div class="col-sm-1"></div>
                <div class="col-sm-4">
                    <h2>Hedging Portfolio</h2>
                    <table id="table_hedgeportfolio" class="table table-hover">
                        <thead>
                            <tr>
                                <th>Asset</th>
                                <th>Price</th>
                                <th>Number</th>
                            </tr>
                        </thead>
                        <tbody>
                                @foreach (KeyValuePair<Everglades.Models.IAsset,int> entry in Model.Hedging_Portfolio.assetList)
                                {
                                    <tr>
                                        <td class="asset-clickable" asset="@entry.Key.Get_Name()">@entry.Key.Get_Name()</td>
                                        <td>@entry.Key.Get_Price()€</td>
                                        <td>@entry.Value</td>
                                    </tr>
                                }
</tbody>
                    </table>
                </div>
                <div class="col-sm-1"></div>
                <div class="col-sm-3">
                    <h2>Closed positions</h2>
                    <table id="table_closedpositions" class="table table-hover">
                        <thead>
                            <tr>
                                <th>Asset</th>
                                <th>Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (Everglades.Models.IAsset a in Model.Hedging_Portfolio.assetList.Keys)
                            {
                                <tr>
                                    <td class="asset-clickable" asset="@a.Get_Name()">@a.Get_Name()</td>
                                    <td>@a.Get_Price()€</td>
                                </tr>
                            }
                        </tbody>
                    </table>


                </div>
            </div>
        </div>
    </div>
    <div class="asset-window">
        <div id="asset-graph" class="graph"></div>
        <button type="button" class="close-button btn btn-danger">
            <span class="glyphicon glyphicon-remove"></span>
        </button>
    </div>
    <div id="tooltip"></div>
</header>
<!-- About -->
<section id="about" class="about">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Stylish Portfolio is the perfect theme for your next project!</h2>
                <p class="lead">This theme features some wonderful photography courtesy of <a target="_blank" href="http://join.deathtothestockphoto.com/">Death to the Stock Photo</a>.</p>
            </div>
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->
</section>

<!-- Map -->
<section id="contact" class="map">
    <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2811.6890462944075!2d5.7661111159208245!3d45.19339047909879!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x478af5a7a840ceb7%3A0x56b8d2dc6bcdecf5!2sEnsimag!5e0!3m2!1sfr!2sfr!4v1449598566767"></iframe>
    <br />
    <small>
        <a href="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2811.6890462944075!2d5.7661111159208245!3d45.19339047909879!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x478af5a7a840ceb7%3A0x56b8d2dc6bcdecf5!2sEnsimag!5e0!3m2!1sfr!2sfr!4v1449598566767"></a>
    </small>
    </iframe>
</section>
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-10 col-lg-offset-1 text-center">
                <h4>
                    <strong>Structured product management interface</strong>
                </h4>
                <p>Ensimag "PEPS" project</p>
                <hr class="small">
                <p>Bonkoski Kevin, Francesiaz Theo, Josi Baptiste, Lo Mouhamadou Bamba, Randon Theophile, XU Xinrui
                </p>
                <hr class="small">
                <p class="text-muted">Copyright &copy; Team 5</p>
            </div>
        </div>
    </div>
</footer>

<script>
    var data_graph_hedge = @Hedging_Portfolio.Get_Price(DateTime.Now - TimeSpan.FromDays(30), DateTime.Now, TimeSpan.FromDays(1)).ToString();
    var label_graph_hedge = "hedge";
    var data_graph_product = @Product.Get_Price(DateTime.Now - TimeSpan.FromDays(30), DateTime.Now, TimeSpan.FromDays(1)).ToString();
    var label_graph_product = "product";
    var data_donut = [];
    var series = Math.floor(Math.random() * 6) + 3;
    for (var i = 0; i < series; i++) {
        data_donut[i] = {
            label: "Series" + (i + 1),
            data: Math.floor(Math.random() * 100) + 1
        }
    }
</script>